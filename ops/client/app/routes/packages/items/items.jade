div.m-t-xl.no-margin
  .hbox#applicantNewdiv
    .m-t-lg
    .wrapper-md.bg-white-only
      div
        .h1.m-l-md.font-thin.h3
          | {{$ctrl.EDIT ? 'Edit' : 'Create'}} Package Item

      form.form.form-validation.form-horizontal.wrapper-md(
      name="newPackageItemForm"
      novalidate
      ng-submit='$ctrl.create(newPackageItemForm)'
      autocomplete='off'
      )
        .row
          .col-md-12.col-sm-12.col-xs-12
            .col-md-7
              .row(ng-if='!$ctrl.EDIT')
                .col-md-12
                  ul.nav
                    li: label.i-checks.i-checks-sm
                      input(
                      type="checkbox"
                      ng-model="$ctrl.quickMode"
                      ng-change="$ctrl.changeMode()"
                      )
                      i
                      .hide
                      | Quick Mode
                      .fa.fa-info-circle.m-l-xs(
                        uib-popover='By selecting this Barcode Scanner will with automatically save'
                        popover-trigger="'mouseenter'"
                        popover-placement='bottom'
                        popover-append-to-body='true'
                      )
              .line.line-dashed.b-b.line-lg.pull-in(style='margin: 5px 0;')
              .row
                .col-md-6.col-sm-6.col-xs-6.no-padder-right
                  .hbox
                    label.col
                      | Photo
                      span.text-danger *
                      .btn-file-wrapper(ng-class="newPackageItemForm.file.$touched && newPackageItemForm.file.$invalid ? 'input-file-danger':''" drag-drop-toggle)
                        .btn-file
                          span(ng-show="(newPackageItemForm.file.$touched && newPackageItemForm.file.$valid) || $ctrl.data.file")
                            span.text-muted(ng-bind="$ctrl.file.name")
                          p.no-margin(ng-hide="(newPackageItemForm.file.$touched && newPackageItemForm.file.$valid) || $ctrl.data.file")
                            span.text-bold Choose a file
                            |  or Drag it here.
                          span.file-support(ng-hide="(newPackageItemForm.file.$touched && newPackageItemForm.file.$valid) || $ctrl.data.file") Supported Formats: .png, .jpeg, .jpg, .bmp'
                          input.form-control(
                          accept="image/*"
                          type="file"
                          ng-model='$ctrl.file'
                          name='file'
                          ngf-pattern="'.png,.jpeg,.jpg,.bmp'"
                          ngf-max-size="15MB"
                          ngf-max-files="1"
                          ngf-select='$ctrl.uploadingPhotos=true;'
                          onclick="this.value = null"
                          ng-image-compress
                          image="myAwesomeImage"
                          ctrl="$ctrl"
                          upload-fn="$ctrl.startUpload"
                          resize-max-height="1000"
                          resize-max-width="1000"
                          resize-quality="0.7"
                          resize-type="image/jpg"
                          required
                          )
                      span.wrapper-xs.text-xs.text-danger(ng-show='$ctrl.clickUpload && !$ctrl.data.file && !newPackageItemForm.file.$invalid') Please choose file
                      span.wrapper-xs.text-xs.text-danger(ng-show='$ctrl.clickUpload && newPackageItemForm.file.$invalid') Please choose supported file
                      span.wrapper-xs.text-xs.text-danger(ng-show='$ctrl.clickUpload && newPackageItemForm.file.$dirty && newPackageItemForm.file.$invalid') Please choose supported file
                .col-xs-3.wrapper-sm.m-t-xs
                  img.pull-left.m-r(
                  ng-if='$ctrl.data.object_thumb'
                  ng-src='{{$ctrl.data.object_thumb}}'
                  style='height: 30px;width: 30px;border-radius: 50%;'
                  )
              .line.line-dashed.b-b.line-lg.pull-in(style='margin: 5px 0;' ng-if='!$ctrl.EDIT')
              .row(ng-if='!$ctrl.EDIT')
                .col-md-12
                  label.col-xs-12.input-group
                    div Categories
                    .pull-left.text-info-dker.b-a.b-info.m-t-xs.m-r-xs.pointer(
                    ng-repeat='packageItemCategory in $ctrl.packageItemCategories'
                    ng-click='$ctrl.data.package_item_category_id = packageItemCategory.id; $ctrl.PackageItemCategory.model = packageItemCategory.name;$ctrl.focus("name");'
                    )
                      span.wrapper-xs(ng-bind='packageItemCategory.name')
              .line.line-dashed.b-b.line-lg.pull-in(style='margin: 5px 0;')
              .row
                .col-md-12
                  .col-md-6.col-sm-5.col-xs-12.no-padder
                    label.col-xs-12.input-group
                      | Package Category
                      span.text-danger *
                      input.form.form-control(
                      type='text'
                      name="store_id"
                      ng-model='$ctrl.PackageItemCategory.model'
                      placeholder='eg: Jeans'
                      uib-typeahead='packageItemCategory.name for packageItemCategory in $ctrl.PackageItemCategory.get($viewValue)'
                      typeahead-loading='$ctrl.PackageItemCategory.loadingStore'
                      typeahead-no-results='$ctrl.PackageItemCategory.noResults'
                      typeahead-on-select='$ctrl.PackageItemCategory.select($item)'
                      ng-blur="$ctrl.PackageItemCategory.blur()"
                      typeahead-wait-ms="10"
                      autocomplete="off"
                      autofocus
                      required
                      )
                      span.wrapper-xs.text-xs.text-danger(ng-show='$ctrl.clickUpload && newPackageItemForm.package_category_id.$dirty && newPackageItemForm.package_category_id.$invalid') Please select PackageItemCategory
                      i.fa.fa-refresh.fa-spin.m-l-xs(ng-show='$ctrl.PackageItemCategory.loadingStore')
                      div(ng-show='$ctrl.PackageItemCategory.noResults')
                        i.fa.fa-remove
                        |  No Results Found

                  .col-md-6.col-sm-5.col-xs-12
                    label.col-xs-12.input-group
                      | Name
                      span.text-danger *
                      input.form.form-control(
                      type='text'
                      name='name'
                      placeholder='eg. Blue Saree'
                      ng-model='$ctrl.data.name'
                      required
                      )
                      span.wrapper-xs.text-xs.text-danger(ng-show='$ctrl.clickUpload && newPackageItemForm.name.$dirty && newPackageItemForm.name.$invalid') Please enter name
              .line.line-dashed.b-b.line-lg.pull-in(style='margin: 5px 0;')
              .row
                .col-md-12
                  .col-md-6.col-sm-5.col-xs-12.no-padder
                    label.col-xs-12.input-group
                      | Quantity
                      span.text-danger *
                      input.form.form-control(
                        type='number'
                        name='quantity'
                        placeholder='eg. 3'
                        ng-model='$ctrl.data.quantity'
                        required
                      )
                      span.wrapper-xs.text-xs.text-danger(ng-show='$ctrl.clickUpload && newPackageItemForm.quantity.$dirty && newPackageItemForm.quantity.$invalid') Please enter quantity
              .line.line-dashed.b-b.line-lg.pull-in(style='margin: 5px 0;')
              .row
                .col-md-12
                  .col-md-6.col-sm-5.col-xs-12.no-padder
                    label.col-xs-12.input-group
                      | Price Per Unit
                      span.text-danger *
                      input.form.form-control(
                      type='number'
                      name='price_amount'
                      placeholder='eg. 300'
                      ng-model='$ctrl.data.price_amount'
                      required
                      )
                      span.wrapper-xs.text-xs.text-danger(ng-show='$ctrl.clickUpload && newPackageItemForm.price_amount.$dirty && newPackageItemForm.price_amount.$invalid') Please enter Price

                  input(type='hidden' ng-bind='$ctrl.data.quantity && $ctrl.data.price_amount && ($ctrl.data.total_amount = $ctrl.data.price_amount* $ctrl.data.quantity)')
                  .col-md-6.col-sm-5.col-xs-12
                    label.col-xs-12.input-group
                      | Total Price
                      span.text-danger *
                      input.form.form-control(
                      type='number'
                      name='total_amount'

                      placeholder='eg. 900'
                      ng-model='$ctrl.data.total_amount'
                      disabled
                      required
                      )
                      span.wrapper-xs.text-xs.text-danger(ng-show='$ctrl.clickUpload && newPackageItemForm.total_amount.$dirty && newPackageItemForm.total_amount.$invalid') Please enter total_amount


              .row
                .col-md-8
                  .text-danger.font-bold(ng-if="newPackageItemForm.file.$error.maxSize") Please select file less than 5MB
                .col-md-12.col-xs-12
                  h4(ng-bind="$ctrl.error.message" style="color:red;")
                  button.btn.btn-success(type='submit' ng-disabled="$ctrl.uploadingPhotos || $ctrl.submitting || newPackageItemForm.$pristine")
                    span.fa.fa-forward.m-r-sm
                    span.text-white(ng-if='!$ctrl.submitting') {{$ctrl.uploadingPhotos ? 'Uploading Photo...' : 'Save ' }}
                    span(ng-if='$ctrl.submitting')
                      i.fa.fa-spin.fa-circle-o-notch
                      span.text-white &nbsp;&nbsp;Submitting...
                  a.btn.btn.success(ng-click="$ctrl.open()") Create Category

    .clearfix

//div(ng-show='$ctrl.submitting')
//  span(ng-include="'app/routes/jobs/cv-uploading/cv-uploading.html'")

